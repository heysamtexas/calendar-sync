<div id="calendar-{{ calendar.id }}-status" 
     class="calendar-sync-toggle" 
     role="region" 
     aria-label="Sync settings for {{ calendar.name }}">
     
    <form class="sync-toggle-form" method="post">
        {% csrf_token %}
        
        <div class="toggle-switch-container">
            <label class="toggle-switch" for="sync-toggle-{{ calendar.id }}">
                <input type="checkbox" 
                       id="sync-toggle-{{ calendar.id }}"
                       name="sync_enabled"
                       {% if calendar.sync_enabled %}checked{% endif %}
                       hx-post="{% url 'dashboard:toggle_calendar_sync' calendar.id %}"
                       hx-target="closest td"
                       hx-swap="innerHTML"
                       hx-indicator="#loading-{{ calendar.id }}"
                       aria-label="{% if calendar.sync_enabled %}Disable{% else %}Enable{% endif %} sync for {{ calendar.name }}"
                       class="toggle-checkbox">
                <span class="toggle-slider">
                    <span class="toggle-indicator"></span>
                </span>
            </label>
            
            <span id="sync-status-{{ calendar.id }}" 
                  class="sync-status-text"
                  aria-live="polite">
                {% if calendar.sync_enabled %}
                    <span class="status-text status-enabled">Enabled</span>
                {% else %}
                    <span class="status-text status-disabled">Disabled</span>
                {% endif %}
            </span>
        </div>
        
        <!-- Loading indicator -->
        <div id="loading-{{ calendar.id }}" 
             class="loading-indicator htmx-indicator"
             role="status"
             aria-label="Updating sync settings">
            <span class="loading-spinner" aria-hidden="true"></span>
            <span class="loading-text">Updating...</span>
        </div>
        
        <!-- Error container -->
        <div id="error-{{ calendar.id }}" 
             class="error-container"
             role="alert"
             aria-live="assertive"
             style="display: none;">
        </div>
    </form>
</div>